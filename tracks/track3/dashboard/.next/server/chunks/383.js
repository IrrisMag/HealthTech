exports.id=383,exports.ids=[383],exports.modules={5511:(e,t,s)=>{Promise.resolve().then(s.bind(s,6920)),Promise.resolve().then(s.bind(s,7553))},4671:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},7553:(e,t,s)=>{"use strict";s.d(t,{default:()=>v});var r=s(326),a=s(7577),n=s(434),o=s(5047),l=s(5920),i=s(2978),c=s(6464),d=s(8378),h=s(4061),m=s(6507),u=s(9635),x=s(1810),g=s(4019),f=s(748),p=s(6920);function v(){let[e,t]=(0,a.useState)(!1),[s,v]=(0,a.useState)(!1),b=(0,o.usePathname)(),{user:y,logout:j,canManageInventory:N,canViewReports:k,canAccessForecasting:w,canAccessOptimization:A}=(0,p.a)();if("/login"===b||!y)return null;let S=(()=>{let e=[{name:"Dashboard",href:"/",icon:l.Z}];return N()&&e.push({name:"Inventory",href:"/inventory",icon:i.Z}),w()&&e.push({name:"Forecasting",href:"/forecasting",icon:c.Z}),A()&&e.push({name:"Optimization",href:"/optimization",icon:d.Z}),e.push({name:"Donors",href:"/donors",icon:h.Z}),k()&&e.push({name:"Reports",href:"/reports",icon:c.Z}),e})();return(0,r.jsxs)("nav",{className:"bg-white shadow-sm border-b border-gray-200 fixed w-full top-0 z-50",children:[r.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"\uD83E\uDE78"})}),r.jsx("span",{className:"font-bold text-xl text-gray-900",children:"BloodBank"})]})}),r.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:S.map(e=>{let t=b===e.href;return(0,r.jsxs)(n.default,{href:e.href,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors ${t?"border-red-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[r.jsx(e.icon,{className:"w-4 h-4 mr-2"}),e.name]},e.name)})})]}),(0,r.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center space-x-4",children:[(0,r.jsxs)("button",{className:"relative p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded-lg",children:[r.jsx(m.Z,{className:"h-6 w-6"}),r.jsx("span",{className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-400 ring-2 ring-white"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>v(!s),className:"flex items-center space-x-2 p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded-lg",children:[r.jsx(u.Z,{className:"h-6 w-6"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:y.full_name})]}),s&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[(0,r.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-700 border-b border-gray-100",children:[r.jsx("div",{className:"font-medium",children:y.full_name}),r.jsx("div",{className:"text-gray-500",children:y.email}),r.jsx("div",{className:"text-xs text-blue-600 mt-1",children:y.role.charAt(0).toUpperCase()+y.role.slice(1)})]}),(0,r.jsxs)("button",{onClick:()=>{v(!1),j()},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[r.jsx(x.Z,{className:"w-4 h-4 inline mr-2"}),"Sign out"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Live"})]})]}),r.jsx("div",{className:"sm:hidden flex items-center",children:r.jsx("button",{onClick:()=>t(!e),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-red-500",children:e?r.jsx(g.Z,{className:"block h-6 w-6"}):r.jsx(f.Z,{className:"block h-6 w-6"})})})]})}),e&&(0,r.jsxs)("div",{className:"sm:hidden",children:[r.jsx("div",{className:"pt-2 pb-3 space-y-1 bg-white border-t border-gray-200",children:S.map(e=>{let s=b===e.href;return r.jsx(n.default,{href:e.href,className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors ${s?"bg-red-50 border-red-500 text-red-700":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700"}`,onClick:()=>t(!1),children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(e.icon,{className:"w-5 h-5 mr-3"}),e.name]})},e.name)})}),(0,r.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center px-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(u.Z,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("div",{className:"text-base font-medium text-gray-800",children:y.full_name}),r.jsx("div",{className:"text-sm text-gray-500",children:y.email}),r.jsx("div",{className:"text-xs text-blue-600",children:y.role.charAt(0).toUpperCase()+y.role.slice(1)})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Live"})]})]}),r.jsx("div",{className:"mt-3 px-4",children:(0,r.jsxs)("button",{onClick:j,className:"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:[r.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Sign out"]})})]})]})]})}},6920:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>i,a:()=>c});var r=s(326),a=s(7577),n=s(5047),o=s(2991);let l=(0,a.createContext)(void 0);function i({children:e}){let[t,s]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),d=(0,n.useRouter)();(0,n.usePathname)();let h=async(e,t)=>{try{let r=await o.e.login({email:e,password:t});if(!o.e.canAccessBloodBank())throw o.e.logout(),Error("You don't have permission to access the blood bank system.");s(r.user)}catch(e){throw e}};return r.jsx(l.Provider,{value:{user:t,isLoading:i,isAuthenticated:!!t,login:h,logout:()=>{o.e.logout(),s(null),d.push("/login")},canAccessBloodBank:()=>o.e.canAccessBloodBank(),canManageInventory:()=>o.e.canManageInventory(),canViewReports:()=>o.e.canViewReports(),canAccessForecasting:()=>o.e.canAccessForecasting(),canAccessOptimization:()=>o.e.canAccessOptimization()},children:e})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2991:(e,t,s)=>{"use strict";s.d(t,{e:()=>a});let r=process.env.NEXT_PUBLIC_TRACK1_API_URL||"https://track1-production.up.railway.app";class a{static getAuthApiUrl(){return`${r}/api/auth`}static async login(e){let t=await fetch(`${this.getAuthApiUrl()}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).detail||"Login failed");let s=await t.json();return localStorage.setItem("access_token",s.access_token),localStorage.setItem("refresh_token",s.refresh_token),localStorage.setItem("user",JSON.stringify(s.user)),s}static async logout(){let e=localStorage.getItem("access_token");if(e)try{await fetch(`${this.getAuthApiUrl()}/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({access_token:e})})}catch(e){console.error("Logout API call failed:",e)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user")}static getCurrentUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}static getToken(){return localStorage.getItem("access_token")}static isAuthenticated(){return!!this.getToken()&&!!this.getCurrentUser()}static hasRole(e){let t=this.getCurrentUser();return t?.role===e}static hasAnyRole(e){let t=this.getCurrentUser();return!!t&&e.includes(t.role)}static async refreshToken(){let e=localStorage.getItem("refresh_token");if(!e)return null;try{let t=await fetch(`${this.getAuthApiUrl()}/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});if(!t.ok)throw Error("Token refresh failed");let s=await t.json();return localStorage.setItem("access_token",s.access_token),localStorage.setItem("refresh_token",s.refresh_token),s.access_token}catch(e){return console.error("Token refresh failed:",e),this.logout(),null}}static canAccessBloodBank(){let e=this.getCurrentUser();return!!e&&["admin","doctor","nurse","staff"].includes(e.role)}static canManageInventory(){let e=this.getCurrentUser();return!!e&&(["admin","staff"].includes(e.role)||"nurse"===e.role&&"laboratory"===e.department)}static canViewReports(){let e=this.getCurrentUser();return!!e&&["admin","doctor","nurse","staff"].includes(e.role)}static canAccessForecasting(){let e=this.getCurrentUser();return!!e&&["admin","doctor"].includes(e.role)}static canAccessOptimization(){let e=this.getCurrentUser();return!!e&&(["admin"].includes(e.role)||"staff"===e.role&&"administration"===e.department)}}},1731:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>l});var r=s(9510);s(7272);var a=s(8570);let n=(0,a.createProxy)(String.raw`/home/tep/HealthTech/HealthTech/tracks/track3/dashboard/components/Navigation.tsx#default`),o=(0,a.createProxy)(String.raw`/home/tep/HealthTech/HealthTech/tracks/track3/dashboard/components/auth/AuthProvider.tsx#AuthProvider`);(0,a.createProxy)(String.raw`/home/tep/HealthTech/HealthTech/tracks/track3/dashboard/components/auth/AuthProvider.tsx#useAuth`),(0,a.createProxy)(String.raw`/home/tep/HealthTech/HealthTech/tracks/track3/dashboard/components/auth/AuthProvider.tsx#withAuth`);let l={title:"Blood Bank Dashboard - Douala General Hospital",description:"AI-Enhanced Blood Bank Stock Monitoring and Forecasting System - Track 3",keywords:"blood bank, inventory management, forecasting, healthcare, AI, Douala General Hospital"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"antialiased",children:r.jsx(o,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(n,{}),r.jsx("main",{className:"pt-16",children:e})]})})})})}},7272:()=>{}};