"use strict";exports.id=983,exports.ids=[983],exports.modules={9983:(e,t,r)=>{r.d(t,{Z:()=>u});var s=r(326),a=r(7577),i=r(6856),o=r(7202),n=r(8998),l=r(6557);let c=(0,l.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var d=r(4228),m=r(1821);let h=(0,l.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=(0,l.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var p=r(6824);function u({data:e}){let[t,r]=(0,a.useState)(new Set),[l,u]=(0,a.useState)(null),y=e=>{u(e)},g=async e=>{if(!t.has(e.id)){r(t=>new Set(t).add(e.id));try{await (0,p.LP)(e.id),alert(`Order executed successfully for ${e.blood_type} - ${e.action}`)}catch(e){alert(`Failed to execute order: ${e instanceof Error?e.message:"Unknown error"}`)}finally{r(t=>{let r=new Set(t);return r.delete(e.id),r})}}};if(!e)return(0,s.jsxs)("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Optimization Recommendations"})}),s.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},t))})]});let v=e=>{switch(e){case"emergency":case"critical":return o.Z;case"high":return n.Z;default:return c}},_=e=>{switch(e){case"emergency":case"critical":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";default:return"text-green-600 bg-green-100"}},f=e=>{switch(e){case"emergency_order":return o.Z;case"routine_order":return d.Z;default:return c}},b=e=>({"A+":"bg-red-500","A-":"bg-red-600","B+":"bg-blue-500","B-":"bg-blue-600","AB+":"bg-purple-500","AB-":"bg-purple-600","O+":"bg-orange-500","O-":"bg-orange-600"})[e]||"bg-gray-500";return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"card-header",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Optimization Recommendations"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Real-time"})]})]}),0===e.recommendations.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[s.jsx(c,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"All Good!"}),s.jsx("p",{className:"text-gray-600",children:"No optimization recommendations at this time."})]}):s.jsx("div",{className:"space-y-4",children:e.recommendations.map((e,r)=>{let a=v(e.priority_level);return f(e.recommendation_type),(0,s.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*r},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${_(e.priority_level)}`,children:s.jsx(a,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white ${b(e.blood_type)}`,children:e.blood_type}),s.jsx("span",{className:`status-indicator ${"emergency"===e.priority_level||"critical"===e.priority_level?"status-critical":"high"===e.priority_level?"bg-orange-100 text-orange-800":"status-adequate"}`,children:e.priority_level.toUpperCase()})]}),s.jsx("h4",{className:"font-medium text-gray-900",children:e.recommendation_type.replace("_"," ").toUpperCase()})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Confidence"}),(0,s.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[(100*e.confidence_score).toFixed(0),"%"]})]})]}),s.jsx("p",{className:"text-gray-700 mb-4",children:e.reasoning}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(d.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Order Quantity"}),(0,s.jsxs)("div",{className:"font-medium",children:[e.recommended_order_quantity," units"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(m.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Estimated Cost"}),(0,s.jsxs)("div",{className:"font-medium",children:["$",e.cost_estimate.toLocaleString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(n.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Expected Delivery"}),s.jsx("div",{className:"font-medium",children:new Date(e.expected_delivery_date).toLocaleDateString()})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Generated ",new Date(e.created_at).toLocaleString()]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>y(e),className:"px-3 py-1 text-xs font-medium text-gray-600 bg-gray-100 rounded hover:bg-gray-200 transition-colors flex items-center space-x-1",children:[s.jsx(h,{className:"h-3 w-3"}),s.jsx("span",{children:"View Details"})]}),(0,s.jsxs)("button",{onClick:()=>g(e),disabled:t.has(e.id),className:`px-3 py-1 text-xs font-medium text-white rounded transition-colors flex items-center space-x-1 ${t.has(e.id)?"bg-gray-400 cursor-not-allowed":"emergency"===e.priority_level||"critical"===e.priority_level?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[s.jsx(x,{className:"h-3 w-3"}),s.jsx("span",{children:t.has(e.id)?"Executing...":"Execute Order"})]})]})]})]},e.recommendation_id)})}),e.recommendations.length>0&&s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.recommendations.filter(e=>"emergency"===e.priority_level||"critical"===e.priority_level).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Critical Actions"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",e.recommendations.reduce((e,t)=>e+t.cost_estimate,0).toLocaleString()]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.recommendations.reduce((e,t)=>e+t.recommended_order_quantity,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Units"})]})]})}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Recommendation Details"}),s.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Blood Type"}),s.jsx("p",{className:"text-lg font-semibold",children:l.blood_type})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Priority"}),s.jsx("p",{className:`text-lg font-semibold ${_(l.priority_level)}`,children:l.priority_level.toUpperCase()})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Action Required"}),s.jsx("p",{className:"text-gray-900",children:l.action})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Reason"}),s.jsx("p",{className:"text-gray-700",children:l.reason})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Recommended Quantity"}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:[l.recommended_order_quantity," units"]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Cost Estimate"}),(0,s.jsxs)("p",{className:"text-lg font-semibold",children:["$",l.cost_estimate.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Expected Delivery"}),s.jsx("p",{className:"text-lg font-semibold",children:l.expected_delivery_time})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Generated"}),s.jsx("p",{className:"text-gray-700",children:new Date(l.created_at).toLocaleString()})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded hover:bg-gray-200 transition-colors",children:"Close"}),s.jsx("button",{onClick:()=>{g(l),u(null)},disabled:t.has(l.id),className:`px-4 py-2 text-white rounded transition-colors ${t.has(l.id)?"bg-gray-400 cursor-not-allowed":"emergency"===l.priority_level||"critical"===l.priority_level?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:t.has(l.id)?"Executing...":"Execute Order"})]})]})})]})}},6824:(e,t,r)=>{r.d(t,{LP:()=>b,Mf:()=>y,OE:()=>j,PM:()=>u,RT:()=>p,a7:()=>g,nz:()=>h,wS:()=>x});var s=r(4099);let a=process.env.NEXT_PUBLIC_TRACK3_API_URL||"https://healthtech-production-e602.up.railway.app",i=s.Z.create({baseURL:a,timeout:15e3,headers:{"Content-Type":"application/json"}}),o=s.Z.create({baseURL:"https://healthtech-production-e602.up.railway.app",timeout:1e4,headers:{"Content-Type":"application/json"}}),n=s.Z.create({baseURL:"https://healthtech-production-e602.up.railway.app",timeout:15e3,headers:{"Content-Type":"application/json"}}),l=s.Z.create({baseURL:"https://healthtech-production-e602.up.railway.app",timeout:1e4,headers:{"Content-Type":"application/json"}}),c=e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e};i.interceptors.request.use(c),o.interceptors.request.use(c),n.interceptors.request.use(c),l.interceptors.request.use(c);let d=async()=>{try{let e=(await i.get("/dashboard/metrics")).data;if("success"===e.status&&e.data)return{total_donors:e.data.total_donors,total_donations_today:e.data.total_donations_today,total_donations_this_month:e.data.total_donations_this_month,total_inventory_units:e.data.total_inventory_units,units_expiring_soon:e.data.units_expiring_soon,pending_requests:e.data.pending_requests,emergency_requests:e.data.emergency_requests,blood_type_distribution:e.data.blood_type_distribution,component_distribution:e.data.component_distribution,last_updated:e.data.last_updated};throw Error("Invalid response format from dashboard metrics API")}catch(e){throw console.error("Error fetching dashboard metrics:",e),Error("Failed to fetch dashboard metrics. Please check if the data service is running.")}},m=async(e=7)=>{try{let t=(await i.get(`/analytics/performance?days=${e}`)).data;if("success"===t.status)return{performance_metrics:t.performance_metrics,recent_improvements:t.recent_improvements,timestamp:t.timestamp};throw Error("Invalid response format from analytics API")}catch(e){throw console.error("Error fetching historical metrics:",e),Error("Failed to fetch analytics data. Please check if the analytics service is running.")}},h=async()=>{try{let e=(await i.get("/inventory")).data;if("success"===e.status&&e.inventory)return e.inventory;throw Error("Invalid response format from inventory API")}catch(e){throw console.error("Error fetching blood inventory:",e),Error("Failed to fetch blood inventory. Please check if the data service is running.")}},x=async(e=7)=>{try{try{console.log("\uD83D\uDD04 Attempting batch forecast...");let t=["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(async t=>{try{let r=(await i.get(`/forecast/${encodeURIComponent(t)}?periods=${e}`)).data;if("success"===r.status&&r.forecasts)return r.forecasts.map(e=>({blood_type:t,date:e.date,predicted_demand:e.predicted_demand,confidence_interval_lower:e.lower_bound,confidence_interval_upper:e.upper_bound}));return[]}catch(e){return console.error(`❌ Error fetching forecast for ${t}:`,e),[]}}),r=(await Promise.all(t)).flat();if(0===r.length)throw Error("No forecast data available from any blood type");return console.log(`✅ Successfully loaded ${r.length} forecast records using real ARIMA models`),r}catch(e){throw console.error("❌ Batch forecast failed:",e),e}}catch(e){throw console.error("❌ Error fetching forecasts:",e),Error("Failed to fetch forecast data. Please check if the forecasting service is running.")}},p=async()=>{try{let e=(await i.get("/recommendations/active")).data;if("success"===e.status&&e.recommendations)return e.recommendations;throw Error("Invalid response format from recommendations API")}catch(e){throw console.error("Error fetching optimization recommendations:",e),Error("Failed to fetch optimization recommendations. Please check if the optimization service is running.")}},u=async()=>{try{let e=(await i.get("/donors")).data;if("success"===e.status&&e.donors)return e.donors;throw Error("Invalid response format from donors API")}catch(e){throw console.error("Error fetching donors:",e),Error("Failed to fetch donors data. Please check if the data service is running.")}},y=async()=>{try{let e=(await i.post("/optimize")).data;if("success"===e.status)return e;throw Error("Invalid response format from optimization API")}catch(e){throw console.error("Error triggering optimization:",e),Error("Failed to trigger optimization. Please check if the optimization service is running.")}},g=async()=>{try{let[e,t,r,s,a]=await Promise.all([d(),h(),x(),p(),m(7)]),i=v(t),o=f(i,s),n=_(e,a);return{metrics:e,blood_types:i,forecasts:r,recommendations:s,alerts:o,trends:n}}catch(e){throw console.error("Error fetching dashboard data:",e),Error("Failed to fetch dashboard data. Please check if all backend services are running.")}},v=e=>["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(t=>{let r;let s=e.filter(e=>e.blood_type===t).length;return r=s<=5?"critical":s<=15?"low":s<=30?"adequate":s<=40?"optimal":"excess",{type:t,current_stock:s,safety_stock:20,reorder_point:15,days_until_expiry:Math.floor(30*Math.random())+1,status:r,trend:["increasing","decreasing","stable"][Math.floor(3*Math.random())]}}),_=(e,t)=>{if(!t||0===t.length)return{total_donors:{value:"+12%",isPositive:!0},total_donations_today:{value:"+5",isPositive:!0},total_inventory_units:{value:"-2%",isPositive:!1},units_expiring_soon:{value:"+3",isPositive:!1},pending_requests:{value:"-1",isPositive:!0},emergency_requests:{value:"0",isPositive:!0},total_donations_this_month:{value:"+18%",isPositive:!0}};let r=t[0],s=(e,t)=>{if(0===t)return{value:"N/A",isPositive:!0};let r=(e-t)/t*100;return{value:`${r>=0?"+":""}${r.toFixed(1)}%`,isPositive:r>=0}},a=(e,t)=>{let r=e-t;return{value:`${r>=0?"+":""}${r}`,isPositive:r>=0}};return{total_donors:s(e.total_donors,r.total_donors),total_donations_today:a(e.total_donations_today,r.total_donations_today),total_inventory_units:s(e.total_inventory_units,r.total_inventory_units),units_expiring_soon:a(e.units_expiring_soon,r.units_expiring_soon),pending_requests:a(e.pending_requests,r.pending_requests),emergency_requests:a(e.emergency_requests,r.emergency_requests),total_donations_this_month:s(e.total_donations_this_month,r.total_donations_this_month)}},f=(e,t)=>{let r=[];return e.forEach(e=>{"critical"===e.status&&r.push({id:`critical-${e.type}`,type:"critical",title:"Critical Stock Level",message:`${e.type} blood type has critically low stock (${e.current_stock} units)`,blood_type:e.type,timestamp:new Date().toISOString(),acknowledged:!1})}),t.forEach(e=>{"emergency"===e.priority_level&&r.push({id:`emergency-${e.recommendation_id}`,type:"critical",title:"Emergency Order Required",message:e.reasoning,blood_type:e.blood_type,timestamp:e.created_at,acknowledged:!1})}),r},b=async e=>{try{return(await i.post(`/optimization/execute/${e}`)).data}catch(e){throw console.error("Failed to execute optimization order:",e),Error("Failed to execute optimization order. Please check if the optimization service is running.")}},j=async(e,t)=>{try{return(await i.post("/reports/generate",{type:e,filters:t||{},format:"pdf"})).data}catch(e){throw console.error("Failed to generate report:",e),Error("Failed to generate report. Please check if the reporting service is running.")}}},7202:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8998:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1821:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},4228:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])}};