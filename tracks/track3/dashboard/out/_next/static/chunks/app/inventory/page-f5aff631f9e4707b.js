(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{4347:function(e,t,a){Promise.resolve().then(a.bind(a,9140))},9140:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(7437),n=a(2265),s=a(429),i=a(3639),o=a(7829),c=a(1723);let l=(0,a(9763).Z)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);var d=a(9116);function m(){let[e,t]=(0,n.useState)([]),[a,m]=(0,n.useState)(!0),[u,p]=(0,n.useState)(null),[y,h]=(0,n.useState)("all");(0,n.useEffect)(()=>{x()},[]);let x=async()=>{try{p(null);let e=await (0,d.nz)();if(Array.isArray(e))t(e);else{let a=(null==e?void 0:e.inventory)||(null==e?void 0:e.data)||[];t(Array.isArray(a)?a:[])}}catch(e){p(e instanceof Error?e.message:"Failed to load inventory"),t([])}finally{m(!1)}},g=e=>{switch(e){case"critical":return"bg-red-100 text-red-800";case"expired":return"bg-gray-100 text-gray-800";case"reserved":return"bg-yellow-100 text-yellow-800";default:return"bg-green-100 text-green-800"}},b=e=>({"A+":"bg-red-500","A-":"bg-red-600","B+":"bg-blue-500","B-":"bg-blue-600","AB+":"bg-purple-500","AB-":"bg-purple-600","O+":"bg-orange-500","O-":"bg-orange-600"})[e]||"bg-gray-500",f=Array.isArray(e)?e.filter(e=>"all"===y||e.blood_type===y):[];return a?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading inventory..."})]})})}):u?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(i.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Inventory"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:u}),(0,r.jsx)("button",{onClick:x,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Retry"})]})})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)(s.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83E\uDE78 Blood Inventory Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Real-time blood stock monitoring and management"})]}),(0,r.jsx)("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh"})]})}),(0,r.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["all","A+","A-","B+","B-","AB+","AB-","O+","O-"].map(e=>(0,r.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(y===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"all"===e?"All Types":e},e))})}),(0,r.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:0===f.length?(0,r.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,r.jsx)(o.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Inventory Found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"all"===y?"No blood inventory items available.":"No ".concat(y," blood type items found.")})]}):f.map((e,t)=>(0,r.jsxs)(s.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},className:"bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold text-white ".concat(b(e.blood_type)),children:e.blood_type}),(0,r.jsx)("span",{className:"status-indicator ".concat(g(e.status)),children:e.status.toUpperCase()})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Quantity"}),(0,r.jsxs)("span",{className:"font-semibold",children:[e.quantity," units"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Location"}),(0,r.jsx)("span",{className:"text-sm",children:e.location})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600 flex items-center",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 mr-1"}),"Expires"]}),(0,r.jsx)("span",{className:"text-sm",children:new Date(e.expiry_date).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600 flex items-center",children:[(0,r.jsx)(l,{className:"w-4 h-4 mr-1"}),"Temperature"]}),(0,r.jsxs)("span",{className:"text-sm",children:[e.temperature,"\xb0C"]})]})]})]},e.id))})]})}},9116:function(e,t,a){"use strict";a.d(t,{RT:function(){return m},a7:function(){return u},nz:function(){return l},wS:function(){return d}});var r=a(3464);let n=r.Z.create({baseURL:"https://healthtech-production-e602.up.railway.app",timeout:1e4,headers:{"Content-Type":"application/json"}}),s=r.Z.create({baseURL:"https://healthtech-production-e602.up.railway.app",timeout:15e3,headers:{"Content-Type":"application/json"}}),i=r.Z.create({baseURL:"https://healthtech-production-e602.up.railway.app",timeout:1e4,headers:{"Content-Type":"application/json"}}),o=e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e};n.interceptors.request.use(o),s.interceptors.request.use(o),i.interceptors.request.use(o);let c=async()=>{try{return(await n.get("/dashboard/metrics")).data}catch(e){throw console.error("Error fetching dashboard metrics:",e),Error("Failed to fetch dashboard metrics")}},l=async()=>{try{return(await n.get("/inventory")).data}catch(e){throw console.error("Error fetching blood inventory:",e),Error("Failed to fetch blood inventory")}},d=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;try{let t=["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(async t=>{try{return(await s.get("/forecast/".concat(t,"?periods=").concat(e))).data.forecasts.map(e=>({blood_type:t,date:e.date,predicted_demand:e.predicted_demand,confidence_interval_lower:e.lower_bound,confidence_interval_upper:e.upper_bound}))}catch(e){return console.error("Error fetching forecast for ".concat(t,":"),e),[]}});return(await Promise.all(t)).flat()}catch(t){return console.error("Error fetching forecasts:",t),h(e)}},m=async()=>{try{return(await i.get("/recommendations/active")).data.recommendations||[]}catch(e){return console.error("Error fetching optimization recommendations:",e),x()}},u=async()=>{try{let[e,t,a,r]=await Promise.all([c(),l(),d(),m()]),n=p(t),s=y(n,r);return{metrics:e,blood_types:n,forecasts:a,recommendations:r,alerts:s}}catch(e){return console.error("Error fetching dashboard data:",e),g()}},p=e=>["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(t=>{let a;let r=e.filter(e=>e.blood_type===t).length;return a=r<=5?"critical":r<=15?"low":r<=30?"adequate":r<=40?"optimal":"excess",{type:t,current_stock:r,safety_stock:20,reorder_point:15,days_until_expiry:Math.floor(30*Math.random())+1,status:a,trend:["increasing","decreasing","stable"][Math.floor(3*Math.random())]}}),y=(e,t)=>{let a=[];return e.forEach(e=>{"critical"===e.status&&a.push({id:"critical-".concat(e.type),type:"critical",title:"Critical Stock Level",message:"".concat(e.type," blood type has critically low stock (").concat(e.current_stock," units)"),blood_type:e.type,timestamp:new Date().toISOString(),acknowledged:!1})}),t.forEach(e=>{"emergency"===e.priority_level&&a.push({id:"emergency-".concat(e.recommendation_id),type:"critical",title:"Emergency Order Required",message:e.reasoning,blood_type:e.blood_type,timestamp:e.created_at,acknowledged:!1})}),a},h=e=>{let t=[];return["A+","A-","B+","B-","AB+","AB-","O+","O-"].forEach(a=>{for(let r=1;r<=e;r++){let e=new Date;e.setDate(e.getDate()+r);let n=20*Math.random()+10;t.push({blood_type:a,date:e.toISOString().split("T")[0],predicted_demand:n,confidence_interval_lower:.8*n,confidence_interval_upper:1.2*n})}}),t},x=()=>[{recommendation_id:"rec-001",blood_type:"O+",current_stock_level:"critical",recommendation_type:"emergency_order",recommended_order_quantity:50,priority_level:"emergency",cost_estimate:6250,expected_delivery_date:new Date(Date.now()+2592e5).toISOString(),reasoning:"URGENT: Current stock (5) is below safety level (20).",confidence_score:.95,created_at:new Date().toISOString()}],g=()=>({metrics:{total_donors:1250,total_donations_today:15,total_donations_this_month:342,total_inventory_units:890,units_expiring_soon:23,pending_requests:8,emergency_requests:2,blood_type_distribution:{"O+":180,"O-":45,"A+":150,"A-":38,"B+":120,"B-":32,"AB+":85,"AB-":22},component_distribution:{whole_blood:450,red_cells:280,plasma:160},last_updated:new Date().toISOString()},blood_types:p([]),forecasts:h(7),recommendations:x(),alerts:[]})},3639:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7829:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]])}},function(e){e.O(0,[763,971,117,744],function(){return e(e.s=4347)}),_N_E=e.O()}]);